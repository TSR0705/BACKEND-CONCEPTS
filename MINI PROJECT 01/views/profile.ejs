<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div class="w-full min-h-screen bg-zinc-900 text-white p-6 md:p-10">
    
    <!-- Logout Button -->
    <div class="w-full flex justify-end mb-8">
        <a class="bg-red-600 hover:bg-red-700 px-5 py-2 rounded-lg text-white shadow-md transition duration-200"
           href="/logout">Logout</a>
    </div>

    <!-- Welcome Heading -->
     <div class="flex items-start gap-3">
        <div class="w-10 h-12 rounded-md overflow-hidden">
            <img class="w-full h-full object-cover" src="/images/uploads/<%= user.profilepic %>" alt="">
        </div>
        <h3 class="text-3xl md:text-4xl mt-3 font-semibold"><span class="font-light">Hello</span>, <%= user.name %> üëã</h3>
    </div>

    <h5 class="mt-2 text-zinc-400 text-base md:text-lg">You can create a new post below.</h5>


    <!-- Post Creation Form -->
    <form action="/post" method="post" class="mt-8 w-full px-2 md:px-4 max-w-md">
        <textarea 
            class="resize-none bg-zinc-800 border border-zinc-700 text-white p-4 w-full h-40 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 placeholder-zinc-500 transition"
            name="content"
            placeholder="What's on your mind..."></textarea>
        
        <input 
            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 mt-4 rounded-lg w-40 cursor-pointer shadow-md transition duration-200"
            type="submit" 
            value="Create New Post">
    </form>

    <!-- Posts Section -->
    <div class="posts mt-12 px-2 md:px-4">
        <h3 class="text-zinc-300 text-3xl font-bold mb-6">Your Posts</h3>

        <!-- Masonry-style Columns -->
        <div class="columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6">
            <% user.posts.reverse().forEach(function(post) { %>

            <div class="break-inside-avoid bg-zinc-900 border border-zinc-700 p-5 rounded-2xl shadow-md hover:shadow-lg transition duration-300 mb-6">
                
                <h4 class="text-xl font-semibold mb-2">@<%= user.username %></h4>
                <p class="text-zinc-300 mb-4 break-words whitespace-pre-wrap"><%= post.content %></p>

                <div class="flex justify-between items-center text-sm text-zinc-500 mb-3">
                    <span>üìÖ Posted on: 2023-10-01</span>
                    <span>‚ù§Ô∏è <%= post.likes.length %></span>
                </div>

                <div class="btns flex gap-4 text-sm">
                    <a href="/like/<%= post._id %>" 
                       class="text-blue-500 hover:underline hover:text-blue-400">
                       <%= post.likes.indexOf(user._id) === -1 ? "Like" : "Unlike" %>
                    </a>

                    <a href="/edit/<%= post._id %>" 
                       class="text-zinc-400 hover:underline hover:text-zinc-300">
                       Edit
                    </a>
                </div>

            </div>

            <% }) %>
        </div>
    </div>

</div>

 
</body>
</html>